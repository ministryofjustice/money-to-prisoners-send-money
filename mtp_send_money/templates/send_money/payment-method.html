{% extends 'base.html' %}
{% load i18n %}
{% load mtp_common %}

{% block page_title %}{% trans 'Pay now by debit card' %} – {{ block.super }}{% endblock %}

{% block inner_content %}
  {% notifications_box request 'send_money_landing' %}

  {# TODO: remove notification before putting up information regarding November 2 changes #}
  <div class="mtp-notification mtp-notification--info">
    <h1 class="mtp-notification__headline">
      {% trans 'Do you know anyone who sends money to someone in prison by cash, cheque or postal order?' %}
    </h1>
    <div id="mtp-notification-UR" class="mtp-notification__message" style="display:block">
      {% trans 'We want to hear from them so we can help them with upcoming changes to the service.' %}
      {% blocktrans trimmed with link='https://docs.google.com/forms/d/e/1FAIpQLSe9-4U9yo9gl_n2AOHcdHCqhMqLFo8CPrITboRvGika8TmjLQ/viewform' %}
         If you know someone who’d be happy to speak to us, <a href="{{ link }}">let us know here</a> so we can get in touch.
      {% endblocktrans %}
    </div>
  </div>

  <div class="grid-row">
    <div class="column-two-thirds">

      <header>
        <h1 class="heading-xlarge">{% trans 'Pay now by debit card' %}</h1>
      </header>

      <p class="lede">
        {% blocktrans trimmed %}
          Paying by debit card is the <strong>fastest</strong>, <strong>simplest</strong> and most <strong>reliable</strong> way of sending money to a prisoner – and it’s <strong>free</strong>
        {% endblocktrans %}
      </p>

      <p>
        {% trans 'You can complete your payment here using Mastercard, Visa and Maestro debit cards.' %}
        {% trans 'Money usually takes less than 3 working days to reach a prisoner’s account, but may take longer.' %}
      </p>

      <p>
        {% trans 'You’ll get email confirmation of payment.' %}
      </p>

      <p>
        {% trans 'You can make an international payment using a debit card.' %}
      </p>

      <div class="panel panel-border-wide">
        {% trans 'From January 2020, you will no longer be able to use a pre-paid debit card.' %}
      </div>

      {% include 'mtp_common/forms/error-summary.html' with form=form only %}

      {% if form.payment_method.field.disabled %}

        <div class="error-summary" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
          <h1 class="heading-medium error-summary-heading">
            {{ form.payment_method.field.message_to_users|default:_('Sending money by debit card is temporarily unavailable') }}
          </h1>
          <p>
            {% trans 'Please try again later.' %}
          </p>
        </div>

      {% else %}

        <form method="post">
          {% csrf_token %}
          {% with payment_method=form.payment_method.field.choices.0.0 %}
            <button name="{{ form.payment_method.html_name }}" value="{{ payment_method }}" id="id_{{ payment_method }}" class="button">
              {% trans 'Continue' %}
            </button>
          {% endwith %}
        </form>

      {% endif %}

      <br />

      <form method="post">
        {% csrf_token %}
        {% with payment_method=form.payment_method.field.choices.1.0 %}
          <button name="{{ form.payment_method.html_name }}" value="{{ payment_method }}" id="id_{{ payment_method }}" class="mtp-link-button link font-xsmall">
            {% trans 'I don’t have a debit card' %}
          </button>
        {% endwith %}
      </form>

    </div>
  </div>
{% endblock %}
