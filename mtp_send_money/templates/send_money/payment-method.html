{% extends 'base.html' %}
{% load i18n %}
{% load mtp_common %}

{% block page_title %}{% trans 'Choose payment method - Send money to a prisoner - GOV.UK' %}{% endblock %}

{% block inner_content %}
  <header>
    {% language_switch %}
    <h1 class="heading-xlarge">{% trans 'How do you want to send money?' %}</h1>
  </header>

  <form method="post" class="js-experiment-context" {% if experiment.context %}data-experiment-context="{{ experiment.context }}"{% endif %}>
    {% csrf_token %}
    {% include 'mtp_common/forms/error-summary.html' with form=form only %}

    {% if form.payment_method.field.disabled %}
      <div class="error-summary" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">

        <h1 class="heading-medium error-summary-heading">
          {{ form.payment_method.field.message_to_users|default:_('Sending money by debit card is temporarily unavailable') }}
        </h1>
        <p>{% trans 'You can come back later or choose to get a prisoner reference to use in a UK bank transfer' %}</p>

      </div>
    {% elif check_govuk_pay_connection %}
      <div style="display:none" class="error-summary mtp-govuk-pay-connection-check" data-image-url="{{ govuk_pay_connection_check_image }}" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
        <h1 class="heading-medium error-summary-heading">
          {% trans 'Paying by debit card won’t work because we don’t support your device or browser' %}
        </h1>
        <p>{% trans 'Try another computer or a newer browser, for example, Chrome, Firefox or Internet Explorer 11 and up' %}</p>
      </div>
    {% endif %}

    <fieldset class="mtp-payment-choice">
      <legend class="visuallyhidden">{% trans 'How do you want to send money?' %}</legend>

      {% for payment_method in form.payment_method.field.choices %}
        <label class="block-label {% if form.payment_method.field.disabled and form.payment_method.value != payment_method.0 %}mtp-grey-choice{% endif %}" for="id_{{ payment_method.0 }}">
          <input id="id_{{ payment_method.0 }}" type="radio" name="{{ form.payment_method.html_name }}" value="{{ payment_method.0 }}"
                 {% if form.payment_method.field.disabled %}disabled{% endif %}
                 {% if form.payment_method.value == payment_method.0 %}checked{% endif %}>
          {{ payment_method.1 }}
        </label>
        {% if not forloop.last %}
          <p class="form-block">{% trans 'or' %}</p>
        {% endif %}
      {% endfor %}
    </fieldset>

    <div class="mtp-payment-help help-box help-box-collapsed">
      <div class="help-box-title" aria-controls="help-box-contents" aria-expanded="false" role="heading">
        <div></div><a href="#">{% trans 'Which is right for me?' %}</a>
      </div>
      <div class="panel panel-border-narrow help-box-contents" id="help-box-contents">
        <h2 class="heading-small mtp-debit-header {% if form.payment_method.field.disabled %}mtp-grey-text{% endif %}">{% trans 'Pay now by debit card' %}</h2>
        {% if form.payment_method.field.disabled %}
          <h2 class="heading-small mtp-debit-unavailable">
            {% trans 'Temporarily unavailable' %}
          </h2>
        {% endif %}
        <ol class="list list-number">
          <li>{% trans 'You can complete your payment here using Mastercard/Visa debit cards' %}</li>
          <li>{% trans 'The money should take up to 3 working days to reach the prisoner' %}</li>
          <li>{% trans 'You’ll get email confirmation of payment' %}</li>
          <li>{% trans 'You can make an international payment using a debit card' %}</li>
        </ol>
        <a class="mtp-help-link" href="{% url 'send_money:help' %}#help-with-debit-cards">{% trans 'More help' %}</a>

        <h2 class="heading-small">{% trans 'Get a prisoner reference to use in a UK bank transfer' %}</h2>
        <ol class="list list-number">
          <li>{% trans 'You’ll get a prisoner reference you can use to make a bank transfer using online banking, your mobile banking app or telephone banking' %}</li>
          <li>{% trans 'You can re-use this reference for this prisoner each time you make a transfer' %}</li>
          <li>{% trans 'The money should take up to 3 working days to reach the prisoner' %}</li>
          <li>{% trans 'You don’t get email confirmation after your bank transfer.' %} <a href="{% url 'send_money:help' %}#email-confirmation">{% trans 'Why?' %}</a></li>
        </ol>
        <a class="mtp-help-link" href="{% url 'send_money:help' %}#help-with-bank-transfers">{% trans 'More help' %}</a>
      </div>
    </div>

    <p>
      <input id="id_next_btn" class="button" type="submit" value="{% trans 'Continue' %}">
    </p>
  </form>
{% endblock %}
